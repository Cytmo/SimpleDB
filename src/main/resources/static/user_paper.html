<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/bootstrap.min.css" >
    <link rel="stylesheet" href="./css/bootstrap-table.min.css">
    <link rel="stylesheet" href="./css/bootstrap-editable.css" type="text/css">
    <link rel="shortcut icon" href="./favicon.ico">
</head>
<body>

<script>

</script>
<div class="container">
    <div>
        <button id="build" class="btn btn-default">Build</button>
        <a href="./user_book.html">
            <button>图书板块</button>
        </a>
        <!--<button id="delete" class="btn btn-default">Delete</button>-->
        <!--<button id="blank" class="btn btn-default">Add a blank line</button>-->
    </div>
    <div class = table-responsive">
        <table id="table"
               class="table text-nowrap"
               data-toggle="table"
               data-show-columns="true"
               data-search="true"
               data-show-refresh="true"
               data-show-toggle="true"
               data-pagination="true"
               data-height="500">
            <thead>
            <tr>
                <th data-field="paper_id">论文号</th>
                <th data-field="paper_title">论文名</th>
                <th data-field="author">作者</th>
                <th data-field="date">发表日期</th>
                <th data-field="jc_name">期刊（会议）名称</th>
                <th data-field="issue_number">期号</th>
                <th data-field="volume_number">卷号</th>
                <th data-field="page_number">页数</th>
                <th data-field="DOI">摘要</th>
            </tr>
            </thead>
        </table>
    </div>
</div>



<script src="./js/jquery.min.js"></script>
<script src="./js/bootstrap.min.js"></script>
<!--<script src="assets/bootstrap2.3/js/bootstrap.min.js"></script>-->
<script src="./js/tableExport.js"></script>
<script src="./js/jquery.base64.js"></script>
<script src="./js/bootstrap-table.js"></script>
<script src="./js/bootstrap-table-export.js"></script>


<script>


    //data-url="data/data1.json"
    $(function () {
        $('#build').click(build);//.trigger('click');
        $('#cells, #rows').keyup(function (e) {
            if (e.keyCode === 13) {
                build();
            }
        });
    });



    //表格超出宽度鼠标悬停显示td内容
    function paramsMatter(value, row, index) {
        var span = document.createElement("span");
        span.setAttribute("title", value);
        span.innerHTML = value;
        return span.outerHTML;
    }
    //td宽度以及内容超过宽度隐藏
    function formatTableUnit(value, row, index) {
        return {
            css: {
                "white-space": "nowrap",
                "text-overflow": "ellipsis",
                "overflow": "hidden",
                "max-width": "80px"
            }
        }
    }






    function build() {
        //这里写刷新表格连接数据库的报文

        // $.ajax({
        //     type: "POST",
        // //    url: "",这里填写数据库调用接口
        //     dataType: "json",
        //     data:{
        //         id:"1",
        //         kind:"1"},
        //     contentType : "application/json",
        //     success: function (data) {
        //         $('#table').bootstrapTable('destroy').bootstrapTable({
        //             columns: columns,
        //             data: data
        //         });
        //     },
        //     error: function () {
        //         alert("错误");
        //     }
        // });


        let columns = [

            // {
            //     field:'number',
            //     title:'index',
            //     formatter:indexFormatter,
            // },
            {
                field: 'paper_id',
                title: '论文号',
                cellStyle:formatTableUnit,
                formatter: paramsMatter,
            },{
                field: 'paper_title',
                title: '论文名',
                cellStyle:formatTableUnit,
                formatter: paramsMatter,
                //editable:true,
            }, {
                field: 'author',
                title: '作者',
                //editable:true,
                cellStyle:formatTableUnit,
                formatter: paramsMatter,
            }, {
                field: 'date',
                title: '发表日期',
                cellStyle:formatTableUnit,
                formatter: paramsMatter,
            }, {
                field: 'jc_name',
                title: '期刊（会议）名称',
                cellStyle:formatTableUnit,
                formatter: paramsMatter,
            }, {
                field: 'issue_number',
                title: '期号',
                cellStyle:formatTableUnit,
                formatter: paramsMatter,
            }, {
                field: 'volume_number',
                title: '卷号',
                cellStyle:formatTableUnit,
                formatter: paramsMatter,
            },
            {
                field: 'page_number',
                title: '页数',
                cellStyle:formatTableUnit,
                formatter: paramsMatter,
            },
            {
                field:'DOI',
                title: '摘要',
                cellStyle:formatTableUnit,
                formatter: paramsMatter,
                // formatter: actionFormatter
            }, ];




        let data = [
            {
                paper_id:"121312321",
                paper_title:"海底两万里",
                author:"凡尔纳",
                date:"30",
                jc_name:"20",
                issue_number:"30",
                volume_number:"新华出版社",
                page_number:"的说法是的粉色调复活甲扫地机佛菩萨机打发票世纪东方平均速度批发价阿萨德寄发票",
                DOI:"12121212",
            },
            {
                paper_id:"12321",
                paper_title:"海底两万里",
                author:"凡纳",
                date:"30",
                jc_name:"20",
                issue_number:"30",
                volume_number:"新华出版社",
                page_number:"的说法是的平均速度批发价阿萨德寄发票",
                DOI:"121212",
            }
        ]


        $('#table').bootstrapTable('destroy').bootstrapTable({
            columns: columns,
            data: data,
            clickToSelect: true,
            showPaginationSwitch: true,

        });


        $('#table').resize();

    }


</script>
</body>
</html>
