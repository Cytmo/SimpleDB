<!DOCTYPE html>
<html lang="en">
 
<head>
    <meta charset="UTF-8">
    <script src="vendor/jquery/jquery-3.2.1.min.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>login</title>

    <style>
        table {
            width: 600px;
            border-collapse: collapse;
            text-align: center;
        }

        td,
        th {
            border: 1px solid #ccc
        }
    </style>
</head>
 
<body>
    <div>
        <div>
            <!-- 左上角部分 -->
            <div class="chrome">
                <span>欢迎</span>
                <span>使用</span>
            </div>
 
            </div>
 
            <!-- 中间部分 -->
            <div class="center">
                <!-- 登陆框 -->
                <div class="user">
                    <p class="cuser">账号登录</p>
                    <!-- 用户名密码及登录按钮部分 -->
                    <div class="form">
                        <div class="user1">
<!--                            <img src="images/user.png" alt="">-->


                                <input name="test1" type="text"   placeholder="用户名">


                        </div>
                        <div class="user2">
<!--                            <img src="images/passwd.png" alt="">-->
                            <input name="test2"  type="password" placeholder="密码">
                        </div>
                        <div>
                            <button type="button" id="login">马上登录</button>
                        </div>
                    </div>
                    <div style="height: 25px;"></div>
                    <div class="mima">
                        <p class="jz">
                            <input type="checkbox" class="box">
                            <span>记住密码</span>
                        </p>
                        <p class="wj">忘记密码?
                            <a href="#">立即找回</a>
                        </p>
                    </div>
                </div>
            </div>
 
            <!-- 底部部分 -->
            <div class="foot">
                <p class="banquan">
                    2020年5月10日
                </p>
            </div>
        </div>
 
    </div>

    <div class="accordion-inner">
        <table class="table table-striped table-hover">
            <thead>
            <tr>
                <td>景点id</td>
                <td>景点名称</td>
                <td>推荐指数</td>
                <td>门票价格</td>
                <td>地址</td>
                <td>联系电话</td>
                <td>操作</td>
            </tr>
            </thead>
            <tbody id="scenic-information">
            </tbody>
        </table>
        <p class="text-right">

            <a class="btn btn-default" id="findAllScenic">查询</a>
        </p>
    </div>


</body>

<script>
    $("#login").click(function (){
        login();

    })

    $("#login1").click(function (){
        login1();

    })



    function login(){

        var obj={};
        obj.user_name=$("input[name='test1']").val();
        obj.user_password=$("input[name='test2']").val();
        obj.identify="1111";
        obj.email="1111";

        var description = "";
        for(var i in obj){
            var property=obj[i];
            description+=i+" = "+property+"\n";
        }
        console.log(description);

        $.ajax({
            type: "POST",
            url: "/login",
            dataType: "json",
            data:JSON.stringify(obj),
            contentType : "application/json",
            success: function (data) {
                console.log(data)
            },
            error: function (e) {
                console.log(e)
            }
        })
    }


    function login1(){

        var obj={};
        obj.user_name=$("input[name='test1']").val();
        obj.user_password=$("input[name='test2']").val();
        obj.identify="1111";
        obj.email="1111";

        var description = "";
        for(var i in obj){
            var property=obj[i];
            description+=i+" = "+property+"\n";
        }
        console.log(description);

        $.ajax({
            type: "POST",
            url: "/login",
            dataType: "json",
            data:JSON.stringify(obj),
            contentType : "application/json",
            success : function(data) {
                var html = "";
                //清空表格数据
                $("#scenic-information").html("");
                //动态刷新表格
                for (var i = 0; i < data.list.length; i++) {
                    html = "<tr>" + "<td>" + data.list[i].id + "</td>"
                        + "<td>" + data.list[i].name + "</td>"
                        + "<td>" + "<img width=\"60\" src=" + "\"../resources/index/img/star/" + data.list[i].recommend + "\"></img>" + "</td>"
                        + "<td>" + data.list[i].price + "</td>"
                        + "<td>" + data.list[i].address + "</td>"
                        + "<td>" + data.list[i].tel + "</td>"
                        + "<td>" + "<a class=\"btn btn-default\" href='javascript:void(0);' onclick=\"addScenicOrder('" + data.list[i].id + "')\">预定</a>" + "</tr>";
                    $("#scenic-information").append(html);//将数据追加进表格
                }
            },
            error: function (e) {
                console.log(e)
            }
        })
    }

</script>
</html>